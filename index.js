//  const productList = [
//     {
//       id: 1,
//       productName: "Unleashed",
//       productPrice: 24.0,
//       quantityAvailable: 100,
//       imageURL:
//         "https://productimages.hepsiburada.net/l/36/600-800/10531719315506.jpg",
//       subImages: [
//         "https://static.wixstatic.com/media/107c0e_e10ba2267bb0433da110b1ad68c1ad9a~mv2.jpeg/v1/fill/w_816,h_816,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/107c0e_e10ba2267bb0433da110b1ad68c1ad9a~mv2.jpeg",
//         ,
//         "https://productimages.hepsiburada.net/l/42/600-800/10733441515570.jpg",
//       ],
//       description:
//         "An all-rounder body butter crafted with nourishing cold-pressed nut-butters, carrier oils, and essential oils.",
//       scents: [
//         "Shea Berry Melon",
//         "Summer Rain",
//         "Rose Petal",
//         "Unleashed",
//         "Coolmint",
//         "Lavender",
//       ],
//       keyIngredients: [
//         {
//           name: "Shea Butter",
//           description:
//             "Shea butter provides hydration and helps repair damaged skin cells.",
//         },
//         {
//           name: "Mango Butter",
//           description: "Improves skin elasticity and promotes rejuvenation.",
//         },
//       ],
//       benefitsAndUses: [
//         {
//           name: "Deep Nourishment",
//           description:
//             "Provides deep nourishment and helps maintain optimal moisture for skin and hair.",
//         },
//       ],
//     },
//     {
//       id: 2,
//       productName: "Summer Rain",
//       productPrice: 22.0,
//       quantityAvailable: 80,
//       imageURL:
//         "https://images.hugoboss.com/is/image/boss/hbeu50436399_001_350?wid=768&qlt=80",
//       subImages: [
//         "https://productimages.hepsiburada.net/l/36/600-800/10531719315506.jpg",
//         "https://productimages.hepsiburada.net/l/35/1000/10473224536114.jpg",
//       ],
//       description:
//         "A refreshing blend of essential oils, perfect for summer hydration.",
//       scents: ["Summer Rain", "Shea Berry Melon", "Lavender"],
//       keyIngredients: [
//         {
//           name: "Coconut Oil",
//           description: "Locks in moisture for all-day hydration.",
//         },
//         {
//           name: "Almond Oil",
//           description: "Rich in vitamins that improve skin texture.",
//         },
//       ],
//       benefitsAndUses: [
//         {
//           name: "Soothing Hydration",
//           description: "Provides a cooling effect and calms irritated skin.",
//         },
//       ],
//     },
//     {
//       id: 3,
//       productName: "Lavender Bliss",
//       productPrice: 26.0,
//       quantityAvailable: 120,
//       imageURL:
//         "https://productimages.hepsiburada.net/l/37/1000/10550756540466.jpg",
//       subImages: [
//         "https://images.hugoboss.com/is/image/boss/hbeu50436399_001_350?wid=768&qlt=80",
//         "https://images.hugoboss.com/is/image/boss/hbeu50436399_001_350?wid=768&qlt=80",
//       ],
//       description:
//         "A calming lavender scent perfect for relaxing and soothing your skin.",
//       scents: ["Lavender", "Rose Petal", "Coolmint"],
//       keyIngredients: [
//         {
//           name: "Lavender Oil",
//           description: "Reduces stress and promotes relaxation.",
//         },
//         {
//           name: "Jojoba Oil",
//           description: "Helps control excess oil and balances skin moisture.",
//         },
//       ],
//       benefitsAndUses: [
//         {
//           name: "Calming Effect",
//           description:
//             "Relieves stress and provides gentle hydration to the skin.",
//         },
//       ],
//     },
//     {
  //       id: 4,
  //       productName: "Shea Berry Melon",
  //       productPrice: 25.0,
//       quantityAvailable: 90,
//       imageURL:
//         "https://productimages.hepsiburada.net/l/35/1000/10473224536114.jpg",
//       subImages: [
  //         "https://productimages.hepsiburada.net/l/41/1000/10709642149938.jpg",
//         "https://productimages.hepsiburada.net/l/41/1000/10709642149938.jpg",
//       ],
//       description:
//         "A fruity and fresh body butter enriched with natural extracts for a rejuvenating experience.",
//       scents: ["Shea Berry Melon", "Lavender", "Summer Rain"],
//       keyIngredients: [
//         {
//           name: "Berry Extract",
//           description: "Packed with antioxidants that promote skin health.",
//         },
//         {
//           name: "Melon Oil",
//           description: "Moisturizes and improves skin elasticity.",
//         },
//       ],
//       benefitsAndUses: [
//         {
//           name: "Skin Rejuvenation",
//           description: "Promotes skin cell regeneration and improves elasticity.",
//         },
//       ],
//     },
//     {
//       id: 5,
//       productName: "Coolmint",
//       productPrice: 23.0,
//       quantityAvailable: 110,
//       imageURL:
//         "https://productimages.hepsiburada.net/l/41/1000/10709642149938.jpg",
//       subImages: [
//         "https://productimages.hepsiburada.net/l/35/1000/10473224536114.jpg",
//         "https://productimages.hepsiburada.net/s/22/500/9953271382066.jpg",
//       ],
//       description:
//         "A minty fresh body butter that provides a refreshing cooling sensation to your skin.",
//       scents: ["Coolmint", "Lavender", "Shea Berry Melon"],
//       keyIngredients: [
//         {
//           name: "Peppermint Oil",
//           description: "Provides a cooling sensation and soothes irritated skin.",
//         },
//         {
  //           name: "Tea Tree Oil",
//           description: "Fights acne and promotes clearer skin.",
//         },
//       ],
//       benefitsAndUses: [
  //         {
//           name: "Cooling Sensation",
//           description:
//             "Cools the skin and provides relief from irritation and inflammation.",
//         },
//       ],
//     },
//     {
  //       id: 6,
//       productName: "Rose Petal",
//       productPrice: 28.0,
//       quantityAvailable: 75,
//       imageURL:
//         "https://productimages.hepsiburada.net/l/42/600-800/10733441515570.jpg",
//       subImages: [
  //         "https://productimages.hepsiburada.net/s/22/1500/9949777100850.jpg",
//         "https://productimages.hepsiburada.net/s/38/1500/10583086202930.jpg",
//       ],
//       description:
//         "Infused with rose petals and essential oils for luxurious hydration.",
//       scents: ["Rose Petal", "Lavender", "Unleashed"],
//       keyIngredients: [
  //         {
    //           name: "Rose Oil",
    //           description: "Softens skin and improves its texture.",
//         },
//         {
//           name: "Grapeseed Oil",
//           description: "Rich in antioxidants and promotes skin health.",
//         },
//       ],
//       benefitsAndUses: [
  //         {
    //           name: "Luxurious Hydration",
    //           description: "Leaves skin feeling soft, smooth, and nourished.",
//         },
//       ],
//     },
//     {
//       id: 7,
//       productName: "Citrus Splash",
//       productPrice: 24.0,
//       quantityAvailable: 130,
//       imageURL:
//         "https://productimages.hepsiburada.net/s/3/1500/9593922158642.jpg",
//       subImages: [
//         "https://productimages.hepsiburada.net/s/21/1500/9933056540722.jpg",
//         "https://productimages.hepsiburada.net/s/22/1500/9949777100850.jpg",
//       ],
//       description: "A zesty citrus blend that energizes and refreshes your skin.",
//       scents: ["Citrus Splash", "Summer Rain", "Coolmint"],
//       keyIngredients: [
//         {
  //           name: "Orange Oil",
  //           description: "Brightens skin and reduces blemishes.",
  //         },
  //         {
    //           name: "Lemon Oil",
//           description: "Energizes the skin and promotes a glowing complexion.",
//         },
//       ],
//     //   benefitsAndUseâ€¦
//     }]

// let products =[
  //     {
    //         image:'images/6-piece-white-dinner-plate-set.jpg',
    //         description:'',
//         price:''
//       },
//       {
  //         image:'images/adults-plain-cotton-tshirt-2-pack-teal.jpg',
//         description:'',
//         price:''
//     },
//     {
//         image:'images/athletic-cotton-socks-6-pairs.jpg',
//         description:'',
//         price:''
//       },
//       {
//         image:'images/backpack.jpg',
//         description:'',
//         price:''
//     },
//     {
//       image:'images/bathroom-rug.jpg',
//         description:'',
//         price:''
//     },
//     {
//         image:'images/blackout-curtains-black.jpg',
//         description:'',
//         price:''
//       },
//       {
//         image:'images/coffeemaker-with-glass-carafe-black.jpg',
//         description:'',
//         price:''
//     },
//     {
  //         image:'images/countertop-blender-64-oz.jpg',
//         description:'',
//         price:''
//       },
//     {
  //       image:'images/double-elongated-twist-french-wire-earrings.webp',
//         description:'',
//         price:''
//       },
//     {
//       image:'images/electric-glass-and-steel-hot-water-kettle.webp',
//       description:'',
//       price:''
//     },
//     {
  //       image:'images/men-chino-pants-beige.jpg',
  //       description:'',
  //       price:''
//     },
//     {
//       image:'images/men-cozy-fleece-zip-up-hoodie-red.jpg',
//       description:'',
//       price:''
//     },
    
//   ];

  let dataElectronics= []
  let dataJewelry = []
  let dataMenCloth = []
  
  let customerProductChose = JSON.parse(localStorage.getItem('customerProductChose')) || [];
  let cost = 0;
  let taxtCost = 0;
// customerProductChose = [];
// saveCustumerProductChose()

function saveCustumerProductChose(){
    localStorage.setItem('customerProductChose', JSON.stringify(customerProductChose))
}

let display_productsNumber = 0;

// console.log(document.getElementById('display_products'))

// function displayProduct(display){
  
//   let display_products = document.getElementById('display_products')
//    if( document.getElementById('display_products')){
//     display_products.innerHTML = '';
//     console.log(display.length > 0);
//     if(display.length > 0){
//       display.forEach((product, i)=>{
  //           display_products.innerHTML +=  `
  //           <div class="border bg-white border-gray-300 border-1 p-[10px] rounded flex flex-col justify-between">
  //           <div>
  //             <div class="h-[17rem]" onclick="viewProductIfo(${i})"> <img class="w-full h-full" src="${product.imageURL}" alt=""></div>
  //             <p class="font-bold my-[7px]">${product.productName}</p>
  //          <p class="font-bold"> prise: $${product.productPrice}</p>
  //             <select class="m-[5px] p-[3px] rounded-lg productCount " name="productCount-${i}" id="">
  //                 <option value="1">1</option>
  //                 <option value="2">2</option>
  //                 <option value="3">3</option>
  //                 <option value="4">4</option>
  //                 <option value="5">5</option>
  //                 <option value="6">6</option>
  //                 <option value="7">7</option>
  //                 <option value="8">8</option>
//                 <option value="9">9</option>
//                 <option value="10">10</option>
//             </select>
//           </div>
//              <div><button   onclick="addToCart(${i})" class="my-[30px] w-full m-auto bg-yellow-500 hover:bg-yellow-600 rounded-lg py-[5px] text-white addToCartBtns">add to cart</button></div>
//          </div>
//           `
//       })
//      }
//      else{
//       console.log(display_products.innerHTML);
//       display_products.innerHTML = `<p class="text-white font-bold text-2xl">No product found</p>`
//     }
//     }
    
// }
// displayProduct(productList)

function displayElectronic(dataElectronicsParm){
  display_productsElectonics.innerHTML = '';
  if(dataElectronicsParm.length === 0){
    display_productsElectonics.innerHTML = 'no Electonics product found'
  }else
  dataElectronicsParm.forEach((product, i)=>{
    let {price,image,title} =product
    // console.log(price,product);
    display_productsElectonics.innerHTML +=  `
    <div class="border bg-white border-gray-300 border-1 p-[10px] rounded flex flex-col justify-between">
    <div>
      <div class="h-[17rem]" onclick="viewProductIfoElectronics(${i})"> <img class="w-full h-full" src="${image}" alt=""></div>
      <p class="font-bold my-[7px]">${title}</p>
   <p class="font-bold"> prise: $${price}</p>
      <select class="m-[5px] p-[3px] rounded-lg productCount " name="productCountElectronics-${i}" id="">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
      </select>
    </div>
       <div><button id="addelEctronicsToCartEl"   onclick="addelEctronicsToCart(${i}, 'electronics')" class="my-[30px] w-full m-auto bg-yellow-500 transition duration-400 hover:bg-yellow-600 rounded-lg py-[5px] text-white addToCartBtns">add to cart</button></div>
   </div>
    `
  })
}


async function moreProductElectronics(){

  if(document.getElementById('display_productsElectonics')){
    spinnerEl.classList.remove('hidden')
    document.querySelectorAll('.productHeading').forEach((productHeadings)=>{
      productHeadings.classList.add('hidden')
    })
    // display_productsElectonics.innerHTML = spinnerEl.innerHTML
    try{
    let res = await fetch('https://fakestoreapi.com/products/category/electronics')
    dataElectronics = await res.json()
    // let display_products = document.getElementById('display_products')
    displayElectronic(dataElectronics)
    spinnerEl.classList.add('hidden')
    document.querySelectorAll('.productHeading').forEach((productHeadings)=>{
      productHeadings.classList.remove('hidden')
    })
  }catch(error){
    spinnerEl.classList.add('hidden')
    console.log(error);
  }

  }
  }
  if(moreProductElectronics){
    moreProductElectronics()
  }

function displayJewelery(dataJewelryParam){
  display_productsJewelery.innerHTML = '';
  if(dataJewelryParam.length == 0){
    display_productsJewelery.innerHTML = 'no jewelery product found'
  }else{
    dataJewelryParam.forEach((product, i)=>{
      let {price,image,title} =product
      display_productsJewelery.innerHTML +=  `
      <div class="border bg-white border-gray-300 border-1 p-[10px] rounded flex flex-col justify-between">
      <div>
        <div class="h-[17rem]" onclick="viewProductIfoJewelery(${i})"> <img class="w-full h-full" src="${image}" alt=""></div>
        <p class="font-bold my-[7px]">${title}</p>
     <p class="font-bold"> prise: $${price}</p>
        <select class="m-[5px] p-[3px] rounded-lg productCount " name="productCountJewelery-${i}" id="">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
      </div>
         <div><button id="addeljeweleryToCartEl"  onclick="addJeweleryToCart(${i}, 'jewelery')" class="my-[30px] w-full m-auto bg-yellow-500 transition duration-400 hover:bg-yellow-600 rounded-lg py-[5px] text-white addToCartBtns">add to cart</button></div>
     </div>
      `
    })
    
  }
}
async function moreProductJewelery(){

  if(document.getElementById('display_productsJewelery')){
    try{
      let res = await fetch('https://fakestoreapi.com/products/category/jewelery')
      dataJewelry = await res.json()
    displayJewelery(dataJewelry)
  }catch(error){
    console.log(error);
    display_error.innerHTML=`
    <div class="w-full h-[50rem] flex justify-center items-center" >
    <div class="container mx-auto px-4 py-6">
        <!-- Error Message (hidden by default) -->
        <div id="error-message" class=" bg-red-700 border border-red-400 text-red-100 px-4 py-3 rounded relative" role="alert">
          <strong class="font-bold">Oops!</strong>
          <span class="block sm:inline">Something went wrong. Please try again later.</span>
          <p> ${error}</p>
          <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
            <svg class="fill-current h-8 w-8 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1 1 0 001.415 0l.086-.086a1 1 0 000-1.415l-4.243-4.243 4.243-4.243a1 1 0 000-1.415l-.086-.086a1 1 0 00-1.415 0L10 8.586 5.757 4.343a1 1 0 00-1.415 0l-.086.086a1 1 0 000 1.415l4.243 4.243-4.243 4.243a1 1 0 000 1.415l.086.086a1 1 0 001.415 0L10 12.414l4.243 4.243z"/></svg>
          </span>
        </div>
      </div>
</div>
    `
  }

  }
}
if(moreProductJewelery){
  moreProductJewelery() 

}
function displayMensProduct(dataMenClothParam){
  display_productMenCloth.innerHTML='';
  if(dataMenClothParam.length ===0){
    display_productMenCloth.innerHTML = "no men's cloth found"
  }else{
    dataMenClothParam.forEach((product, i)=>{
      let {price,image,title} =product
      console.log();
      // console.log(price,product);
      display_productMenCloth.innerHTML +=  `
      <div class="border bg-white border-gray-300 border-1 p-[10px] rounded flex flex-col justify-between">
      <div>
        <div class="h-[17rem]" onclick="viewProductIfoMenCloth(${i})"> <img class="w-full h-full" src="${image}" alt=""></div>
        <p class="font-bold my-[7px]">${title}</p>
     <p class="font-bold"> prise: $${price}</p>
        <select class="m-[5px] p-[3px] rounded-lg productCount " name="productCountMenCloth-${i}" id="">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
      </div>
         <div><button id="addMenClothToCartEl" onclick="addMenClothToCart(${i}, 'MenCloth')" class="my-[30px] w-full transition duration-400 m-auto bg-yellow-500 hover:bg-yellow-600 rounded-lg py-[5px] text-white addToCartBtns">add to cart</button></div>
     </div>
      `
    
    })
    
  }

}
async function moreProductMenCloth(){
  if(document.getElementById('display_productMenCloth')){
    try{
    let res = await fetch("https://fakestoreapi.com/products/category/men's clothing")
    dataMenCloth = await res.json()
    // let display_products = document.getElementById('display_products')
    displayMensProduct(dataMenCloth)
  }catch(error){
    console.log(error);
  }

  }
}
if(moreProductMenCloth){
  moreProductMenCloth()
}

function addelEctronicsToCart(i) {
  const selectedCount = document.querySelector(`select[name="productCountElectronics-${i}"]`).value;
  let actualProduct = dataElectronics[i];
  let matchingProduct= customerProductChose.find(matchingProductObject=> matchingProductObject.id === actualProduct.id)
  if(matchingProduct){
        matchingProduct.quantity += Number(selectedCount);
        saveCustumerProductChose()
  
    }else{
      actualProduct.quantity = Number(selectedCount);
      actualProduct.cartId = `cart-${i}`;
      actualProduct.chosenProductImg = actualProduct.imageURL
        customerProductChose.push(actualProduct);
        saveCustumerProductChose()

    }
    $.toast({
      heading: 'Added to Cart',
      text: `Added ${selectedCount} of ${actualProduct.title} to your cart.`,
      icon: 'success',
      position: 'top-right',
      hideAfter: 3000,
      stack: false
  });
// console.log(chosenProduct);
countProduct()
}


function addJeweleryToCart(i) {
  const selectedCount = document.querySelector(`select[name="productCountJewelery-${i}"]`).value;
  console.log(customerProductChose);
  let actualProduct = dataJewelry[i];
  console.log(actualProduct);
  let matchingProduct= customerProductChose.find(matchingProductObject=> matchingProductObject.id === actualProduct.id)
  console.log(matchingProduct);
  if(matchingProduct){
      console.log(selectedCount);
        matchingProduct.quantity += Number(selectedCount);
        console.log(matchingProduct.quantity)
        saveCustumerProductChose()
  
    }else{
      actualProduct.quantity = Number(selectedCount);
      actualProduct.cartId = `cart-${i}`;
      actualProduct.chosenProductImg = actualProduct.imageURL
        customerProductChose.push(actualProduct);
        saveCustumerProductChose()

    }
    $.toast({
      heading: 'Added to Cart',
      text: `Added ${selectedCount} of ${actualProduct.title} to your cart.`,
      icon: 'success',
      position: 'top-right',
      hideAfter: 3000,
      stack: false
  });
// console.log(chosenProduct);
countProduct()
}


function addMenClothToCart(i) {
  const selectedCount = document.querySelector(`select[name="productCountMenCloth-${i}"]`).value;
  console.log(customerProductChose);

  let actualProduct = dataMenCloth[i];
  console.log(actualProduct);
  let matchingProduct= customerProductChose.find(matchingProductObject=> matchingProductObject.id === actualProduct.id)
  console.log(matchingProduct);
  if(matchingProduct){
      console.log(selectedCount);
        matchingProduct.quantity += Number(selectedCount);
        console.log(matchingProduct.quantity)
        saveCustumerProductChose()
  
    }else{
      actualProduct.quantity = Number(selectedCount);
      actualProduct.cartId = `cart-${i}`;
      actualProduct.chosenProductImg = actualProduct.imageURL
        customerProductChose.push(actualProduct);
        saveCustumerProductChose()

    }
    $.toast({
      heading: 'Added to Cart',
      text: `Added ${selectedCount} of ${actualProduct.title} to your cart.`,
      icon: 'success',
      position: 'top-right',
      hideAfter: 3000,
      stack: false
  });
// console.log(chosenProduct);
countProduct()
}

 
moveToCartDisplay=()=>{
    window.location.href = 'https://samdev43.github.io/my-E-_commerse-project/cart.html';
    // window.location.href = 'http://127.0.0.1:5500/cart.html'

}


function displayCartFunc(){
  if(document.getElementById('displayCart')){
    let displayCart= document.getElementById('displayCart')
    displayCart.innerHTML = '';
    // customerProductChose = [];
    if(customerProductChose.length > 0){
      customerProductChose.forEach((cartProduct, i)=>{
          let {id, productName, price, description, image, title, scents, keyIngredients} = cartProduct;
          // console.log(subImages)
            displayCart.innerHTML +=`
            <div class="shadow-lg  bg-orange-400 border text-white  border-[1px] rounded-lg overflow-hidden p-[20px] m-[10px]">
            <div>
                <div class=" flex gap-[20px] items-start">
                     <div class="w-[80px]">
                       <img src="${image}" alt="">
                     </div>
                     <div>
                         <p class="font-bold sm:text-sm">${title}</p>
                         <p>$${price}</p>
                         <div class="flex items-center sm:text-sm  gap-[10px]"><p  id="quantity_${i}">quantity: ${cartProduct.quantity}</p> <button class="hover:text-green-600"
                          onclick="showUpdateBTN(${i})">Update</button> <button  class=" hover:text-red-600 " onclick=" delFunc(${i})">Delete</button>
                           <button id="removeIncANDecBTN_${i}" onclick="removeIncANDecBTNFUNC(${i})" class="hidden">Done</button></div>
                         <div  id="UpdateBTN_${i}"  class="hidden flex items-center mt-[20px]">
                               <button class="p-2 shadow-lg  transition duration-1000  hover:bg-gray-500 hover:text-white w-[30%] bg-white rounded-lg  text-black mx-[10px]" onclick="decreaseQuantityFunc(${i})">-</button>
                               <button class="p-2 shadow-lg transition duration-1000  hover:bg-gray-500 hover:text-white w-[30%] bg-white rounded-lg  text-black mx-[10px]" onclick="increaseQuantityFunc(${i})">+</button>
                           </div>
                     </div>
                </div>
              <div>
                    
              </div>
            </div>
          </div>
            `
            saveCustumerProductChose()
            checkPrice()
          })
          

    }else{
      displayCart.innerHTML =`<p class="text-white font-bold text-2xl">No product added yet</p>`
    }
    
  }
    
}


countProduct()
displayCartFunc()

delFunc=(i)=>{
  customerProductChose.splice(i,1)
    saveCustumerProductChose()
    displayCartFunc()
    countProduct()
    checkPrice()
}

if(document.getElementById('searchINP')){

  searchINP.addEventListener('input', (()=>{
    console.log(searchINP.value)
   searchElectronicsProduct = dataElectronics.filter((check => check.title.toLocaleLowerCase().includes(searchINP.value.toLocaleLowerCase())));
   searchdataJewelryProduct = dataJewelry.filter((check => check.title.toLocaleLowerCase().includes(searchINP.value.toLocaleLowerCase())));
   searchdataMenClothProduct = dataMenCloth.filter((check => check.title.toLocaleLowerCase().includes(searchINP.value.toLocaleLowerCase())));
   displayElectronic(searchElectronicsProduct)
   displayJewelery(searchdataJewelryProduct)
   displayMensProduct(searchdataMenClothProduct)
   console.log(searchElectronicsProduct, searchdataJewelryProduct ,searchdataMenClothProduct);
  }))
}

function showUpdateBTN(index){
  let updateBtn = document.getElementById(`UpdateBTN_${index}`);
  document.getElementById(`removeIncANDecBTN_${index}`).classList.toggle('hidden');
  if (updateBtn) {
    updateBtn.classList.toggle('hidden'); 
  }
}

function removeIncANDecBTNFUNC(index){
  document.getElementById(`UpdateBTN_${index}`).classList.add('hidden')
  document.getElementById(`removeIncANDecBTN_${index}`).classList.add('hidden');
}

function increaseQuantityFunc(index){
  customerProductChose[index].quantity+=1
  document.getElementById(`quantity_${index}`).innerHTML =`quantity: ${customerProductChose[index].quantity}`
  countProduct()
  checkPrice()

  saveCustumerProductChose();
}

function decreaseQuantityFunc(index){
  if(customerProductChose[index].quantity > 1){
    customerProductChose[index].quantity-=1
     document.getElementById(`quantity_${index}`).innerHTML =`quantity: ${customerProductChose[index].quantity}`
     checkPrice()
     countProduct()
     
     saveCustumerProductChose();
  }
}
if(document.querySelector('.toHomePage1')){
    document.querySelector('.toHomePage1').addEventListener('click', ()=>{
        window.location.href= 'http://samdev43.github.io/my-E-_commerse-project/index.html'
        // window.location.href= 'http://127.0.0.1:5500/index.html'
    })
}

function countProduct(){
  if( document.querySelector('.display_productsnumb')){
    document.querySelector('.display_productsnumb').innerHTML = customerProductChose.length 
    
  }
  if(document.getElementById('CheckoutItems')){
    document.getElementById('CheckoutItems').innerHTML = `Checkout (${customerProductChose.length } items)`
  }

  if(document.getElementById('CheckoutItemsUpdate')){
    document.getElementById('CheckoutItemsUpdate').innerHTML = `Checkout (${customerProductChose.length } items)`
  }

  checkPrice()
  // console.log(document.querySelector('.display_productsnumb').innerHTML);
}

function checkPrice() {
  if (document.getElementById('totalItem')) {
    // Reset cost and taxtCost
    cost = 0;
    taxtCost = 0;

    customerProductChose.forEach((customerProductChoseo) => {
      cost += customerProductChoseo.price * customerProductChoseo.quantity;
    });

    taxtCost = cost + (cost * 10) / 100;

    document.getElementById('totalItem').innerHTML = `<p>items(${customerProductChose.length}):</p><p>$${cost.toFixed(2)}</p>`;
    document.getElementById('priceBefTask').innerHTML = `<p>Total before tax:</p><p>$${cost.toFixed(2)}</p>`;
    document.getElementById('priceAftTask').innerHTML = `<p>Estimated tax (10%):</p><p>$${((cost * 10) / 100).toFixed(2)}</p>`;
    document.getElementById('finalAmount').innerHTML = `<p>Order total:</p><p>$${taxtCost.toFixed(2)}</p>`;
  }
}

checkPrice();

function viewProductIfoElectronics(i){
  // moreProductElectronics()
  console.log(i);
   console.log(dataElectronics);
   localStorage.setItem('checkOutProduct', JSON.stringify(dataElectronics[i]))
   location.href = `http://samdev43.github.io/my-E-_commerse-project/prduct_discription.html`              
  //  location.href=`http://127.0.0.1:5500/prduct_discription.html`
  
}

function viewProductIfoJewelery(i){
  // moreProductJewelery()
  console.log(i);
   console.log(dataJewelry);
   localStorage.setItem('checkOutProduct', JSON.stringify(dataJewelry[i]))
   location.href = `http://samdev43.github.io/my-E-_commerse-project/prduct_discription.html`              
  //  location.href=`http://127.0.0.1:5500/prduct_discription.html`
  
}

function viewProductIfoMenCloth(i){
  // moreProductMenCloth()
   console.log(dataMenCloth);
   localStorage.setItem('checkOutProduct', JSON.stringify(dataMenCloth[i]))
   location.href = `http://samdev43.github.io/my-E-_commerse-project/prduct_discription.html`              
  //  location.href=`http://127.0.0.1:5500/prduct_discription.html`
  
}


function displayCheckOutProduct(){
  let product = JSON.parse(localStorage.getItem('checkOutProduct'))  || []
if( document.getElementById('product-detail')){

  document.getElementById('product-detail').innerHTML = `
  <div class="mt-[70px] p-6 bg-violet-950 text-white rounded-lg shadow-lg max-w-lg mx-auto">
  <h1 class="text-2xl font-bold te-800 mb-4">${product.title}</h1>

  <div class="flex justify-center mb-4">
       <img class="w-64 h-64 object-cover rounded-lg" src="${product.image}" alt="${product.productName}">
  </div>

  <p class="text-gray-200 mb-4">${product.description}</p>

  <div class="flex justify-between items-center mb-4">
     <p class="text-lg font-semibold text-gray-300">Price: $${product.price}</p>
     <p class="text-sm text-gray-200">Available: ${product.rating.count}</p>
  </div>

  <div class="mb-6">
     <h3 class="text-xl font-bold text-gray-300 mb-2">product rating:</h3>
     <div class="list-disc list-inside text-gray-100 space-y-1">
        <li class="pl-2">${product.rating.rate}</li>
     </div>
     
  </div>
   description
   <div id="addToCarttUpdateEl" class="hidden flex items-center gap-[20px] my-[20px]">
      <div class="flex gap-[4px]"> quantity:<p id="updateQuality">1</p></div>
      <button  class="transition duration-1000  hover:bg-gray-500 hover:text-white p-2 shadow-lg  w-[30%] bg-white rounded-lg  text-black mx-[10px]" onclick="decreaseQuantityFuncaddToCartt()">-</button>
      <button class="transition duration-1000  hover:bg-gray-500 hover:text-white p-2 shadow-lg  w-[30%] bg-white rounded-lg  text-black mx-[10px]" onclick="increaseQuantityFuncaddToCartt()">+</button>
   </div>
   <button onclick="addToCarttUpdate()"
   class=" mb-[10px] w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition duration-400">
   update
</button>

  <button onclick="addToCartt()"
     class=" w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg transition duration-400">
     Add to Cart
  </button>
</div>
`;
// localStorage.removeItem('checkOutProduct')
}
}

displayCheckOutProduct()


function  increaseQuantityFuncaddToCartt(){
  let productt = JSON.parse(localStorage.getItem('checkOutProduct'));
  let matchingProduct = customerProductChose.find(product=> product.description === productt.description)
  let quantity =1;
  if(matchingProduct){
    console.log(matchingProduct.quantity);
    quantity = ++matchingProduct.quantity
    console.log(quantity);

  console.log(quantity);
  }else{
    productt.quantity=1
    customerProductChose.push(productt)
    increaseQuantityFuncaddToCartt()
    console.log(customerProductChose);
    // quantity = productt.quantity + Number(document.getElementById('updateQuality').innerHTML)
    // console.log(productt);
  }
 document.getElementById('updateQuality').innerHTML = quantity
 countProduct()
 saveCustumerProductChose();
}
if(document.getElementById('updateQuality')){
  decreaseQuantityFuncaddToCartt()
}
function decreaseQuantityFuncaddToCartt() {
  let productt = JSON.parse(localStorage.getItem('checkOutProduct'));
  let matchingProduct = customerProductChose.find(product=> product.description === productt.description)

  let quantity = 1
  if(matchingProduct){
    if(matchingProduct.quantity > 1){
      console.log(matchingProduct.quantity);
      console.log( matchingProduct.quantity);
      quantity = --matchingProduct.quantity
     console.log(quantity);
      document.getElementById('updateQuality').innerHTML =  matchingProduct.quantity
      console.log(quantity);
      countProduct() 
    }
  }else{
    productt.quantity=1
    customerProductChose.push(productt)
    decreaseQuantityFuncaddToCartt()
   
    console.log(quantity);
  }
  saveCustumerProductChose();
}

function addToCarttUpdate(){
  let productt = JSON.parse(localStorage.getItem('checkOutProduct'));
  let addToCarttUpdateEl = document.getElementById('addToCarttUpdateEl')
  addToCarttUpdateEl.classList.toggle('hidden')
  console.log(productt);
}

function addToCartt(){
  let productt = JSON.parse(localStorage.getItem('checkOutProduct'));
  let matchingProduct = customerProductChose.find(product => product.id === productt.id)
  console.log(customerProductChose);
  if(matchingProduct){
    console.log(matchingProduct);
    console.log(matchingProduct.quantity ?matchingProduct.quantity :1);
    matchingProduct.quantity =  Number(document.getElementById('updateQuality').innerHTML)
    console.log((matchingProduct.quantity,Number(document.getElementById('updateQuality').innerHTML)));
    countProduct() 
    
  }else{
    productt.quantity = 1
    console.log(productt.quantity);
    customerProductChose.push(productt)
    console.log(customerProductChose);
    countProduct() 
  }
    saveCustumerProductChose();
  location.href= `http://samdev43.github.io/my-E-_commerse-project/index.html`
  // location.href=`http://127.0.0.1:5500/index.html`
  
   }

   if(document.getElementById('toHomePage2')){

   toHomePage2.addEventListener('click', (()=>{
    location.href = `http://samdev43.github.io/my-E-_commerse-project/index.html`
    // location.href = `http://127.0.0.1:5500/index.html`
   }))

   toCartPage2.addEventListener('click', (()=>{
    location.href = `http://samdev43.github.io/my-E-_commerse-project/cart.html`
    // location.href = `http://127.0.0.1:5500/cart.html`
   }))
   }

   function feedBackFunc(){
    document.getElementById('feedBackPop').classList.remove('hidden')
   }


document.getElementById('CancelRequest').addEventListener('click', (()=>{
  document.getElementById('feedBackPop').classList.add('hidden')

}))

document.getElementById('confirmRequest').addEventListener('click', (()=>{
  document.getElementById('feedBackPop').classList.add('hidden')
  document.getElementById('feedBackMessage').innerHTML =`
    
  <h2 class="text-xl font-semibold text-gray-800 mb-4">Are you sure?</h2>
  <p class="text-gray-600 mb-6">Congratulation you have successfully purchace this product </p>
  <p>you are charge $${taxtCost.toFixed(0)} for this product </p>
  `
  document.getElementById('ConfirmfeedBackPop').classList.remove('hidden')
  setTimeout(()=>{
    timerOut()
  },3000)
}))

function timerOut() {
  document.getElementById('ConfirmfeedBackPop').classList.add('hidden')
}